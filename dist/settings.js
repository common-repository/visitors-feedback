!function(){"use strict";var e={646:function(e,t,n){var r=n(533);t.s=r.createRoot,r.hydrateRoot},533:function(e){e.exports=ReactDOM}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e=n(646),t=wp.element,r=wp.components,o=wp.data,a=wp.i18n,c=wp.compose,i=wp.blockEditor,l=function(e){var n=e.attributes,r=e.setAttributes,o=n.uniqueId,a=n.background,c=n.headingFontSize,i=n.descFontSize,l=n.buttonGap,u=n.color,s=n.btnColor,f=n.btnBG,p=n.closeBtnColor,m=n.closeBtnBG,b=n.CSS;return(0,t.useEffect)((function(){var e="#".concat(o," .popup{background: ").concat(a,";color: ").concat(u,"}#").concat(o," .heading{font-size: ").concat(c,"}#").concat(o," .text{font-size: ").concat(i,"}#").concat(o," .form {gap: ").concat(l,"}#").concat(o," .form .submit {color: ").concat(s,"; background: ").concat(f,"}#").concat(o," .close {color: ").concat(p,"; background: ").concat(m,"}");r({CSS:e})}),[o,a,c,i,l,u,s,f,p,m]),React.createElement("style",null,b)};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,i=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=wp.element,p=f.useState,m=f.Fragment,b=wp.components,d=b.Dropdown,y=b.ColorPicker,v=b.Button,g=function(e){var t=e.value,n=e.title,r=void 0===n?"":n,o=e.defaultColor,a=e.onChange,c=(e.className,e.disableAlpha),i=e.boxPosition,l=void 0===i?"top left":i,s=e.globalColors,f=void 0===s?[]:s,b=u(p(t),2),g=b[0],h=b[1];return React.createElement(d,{position:l,renderToggle:function(e){var n=e.isOpen,c=e.onToggle;return React.createElement("div",{style:{display:"flex"}},o&&o!=g&&React.createElement(v,{icon:"image-rotate",className:"bColorReset",onClick:function(){a(o),h(o)}}),React.createElement("div",{className:"BColorButtonContainer"},React.createElement("button",{className:"BColorButton",title:r,onClick:c,"aria-expanded":n,style:t?{backgroundColor:t}:{backgroundColor:"transparent"}})))},renderContent:function(e){var n=e.isOpen;e.onToggle,e.onClose;return React.createElement(m,null,React.createElement(y,{color:t||"",onChangeComplete:function(e){a("rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")")),h(e.hex)},disableAlpha:c||!1}),f.length>0&&React.createElement("div",{style:{display:"flex"},className:"globalColors"},f.map((function(e){return React.createElement("div",{className:"BColorButtonContainer"},React.createElement("button",{className:"BColorButton",onClick:function(){a(e.color),h(e)},"aria-expanded":n,style:{backgroundColor:t?e.color:"transparent"}}))}))))}})},h=function(e){var t=e.height,n=void 0===t?"10px":t,r=e.width,o=void 0===r?"10px":r,a=e.color,c=void 0===a?"#3498db":a;return React.createElement("div",{className:"simple-loader",style:{height:n,width:o,borderTopColor:c}})},E=function(){setTimeout((function(){var e=document.querySelectorAll(".components-panel__body-title button");function t(){var n=this;this.removeEventListener("click",t),e.forEach((function(e){"true"!==e.getAttribute("aria-expanded")||e.isEqualNode(n)||e.click()})),setTimeout((function(){n.addEventListener("click",t)}),500)}e.forEach((function(e){e.addEventListener("click",t)}))}),500)};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,i=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=React,P=w.useState,O=w.useEffect,C=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=void 0===t?"string":t,r=R(P(!0),2),o=r[0],a=r[1],c=R(P(!1),2),i=c[0],l=(c[1],R(P(null),2)),u=l[0],s=(l[1],R(P(null),2)),f=s[0],p=s[1];O((function(){wp.api.loadPromise.then((function(){(new wp.api.models.Settings).fetch().then((function(t){p(m(t[e],n)),a(!1)}))}))}),[]);var m=function(e,t){var n=e;try{n=JSON.parse(e)}catch(e){}return n};return{data:f,isLoading:o,isError:i,error:u}};var j=React;j.useState,j.useEffect;var _=React;_.useState,_.useEffect;function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var B=["isLoaded"];function x(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,i=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=React,I=D.useState,F=(D.useEffect,function(e,t){var n=t.type,r=void 0===n?"string":n,o=N(I(!1),2),a=o[0],c=o[1],i=N(I(!1),2),l=i[0],u=i[1],s=N(I(null),2),f=s[0],p=s[1],m=N(I(null),2),b=m[0],d=m[1],y=function(e,t){var n=e;if("object"===t){e.isLoaded;n=x(e,B);try{n=JSON.stringify(e)}catch(e){p(null==e?void 0:e.message),u(!0)}}return n};return{data:b,saveData:function(t){u(!1),p(null),c(!0);try{new wp.api.models.Settings(A({},e,y(t,r))).save().then((function(t){d(y(t[e],r)),c(!1)}))}catch(e){u(!0),p(null==e?void 0:e.message),c(!1)}},isLoading:a,isError:l,error:f}}),L=(0,c.compose)([(0,o.withSelect)((function(e){return{popup:(0,e("visitor-feedback").getPopup)()}})),(0,o.withDispatch)((function(e){return{setPopup:e("visitor-feedback").setPopup}}))])((function(e){var n=e.popup,o=e.setPopup,c=n.pages,i=n.background,l=n.color,u=n.headingFontSize,s=n.descFontSize,f=n.buttonGap,p=n.btnColor,m=n.btnBG,b=n.closeBtnColor,d=n.closeBtnBG,y=n.enabled,v=F("vstr_popup_design",{type:"object"}),R=v.saveData,S=v.isLoading;return(0,t.useEffect)((function(){E()}),[]),React.createElement("div",{className:"b-custom-panel"},React.createElement("div",{className:"d-flex justify-end items-center m-2"},S&&React.createElement(h,null),React.createElement(r.Button,{variant:"primary",className:"ml-2 pl-8 pr-8",onClick:function(){R(n)},disabled:S},(0,a.__)("Update","visitor-feedback"))),React.createElement(r.Panel,{onSelect:function(){return E()}},React.createElement(r.PanelBody,{title:(0,a.__)("Options","visitor-feedback")},React.createElement(r.PanelRow,null,React.createElement(r.ToggleControl,{label:(0,a.__)("Enabled","visitor-feedback"),checked:y,onChange:function(){return o({enabled:!y})}})),y&&React.createElement(r.TextareaControl,{help:(0,a.__)("Leave empty to show on every page. every page should be new line","bpm"),label:(0,a.__)("Pages","visitor-feedback"),rows:5,value:c,onChange:function(e){return o({pages:e})},placeholder:"every page should be a new line"})),React.createElement(r.PanelBody,{title:"Style"},React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Popup Background","visitor-feedback")),React.createElement(g,{value:i,onChange:function(e){return o({background:e})}})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Text Color","visitor-feedback")),React.createElement(g,{value:l,onChange:function(e){return o({color:e})}})),React.createElement(r.PanelRow,null,React.createElement(r.__experimentalUnitControl,{label:(0,a.__)("Heading Font Size",""),labelPosition:"side",value:u,onChange:function(e){return o({headingFontSize:e})}})),React.createElement(r.PanelRow,null,React.createElement(r.__experimentalUnitControl,{label:(0,a.__)("Description Font Size",""),labelPosition:"side",value:s,onChange:function(e){return o({descFontSize:e})}})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Button Gap","visitor-feedback")),React.createElement(r.__experimentalUnitControl,{onChange:function(e){return o({buttonGap:e})},value:f})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Button Text Color","visitor-feedback")),React.createElement(g,{value:p,onChange:function(e){return o({btnColor:e})}})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Button Background","visitor-feedback")),React.createElement(g,{value:m,onChange:function(e){return o({btnBG:e})}}))),React.createElement(r.PanelBody,{title:(0,a.__)("Close Button","visitor-feedback"),initialOpen:!1},React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Color","visitor-feedback")),React.createElement(g,{value:b,onChange:function(e){return o({closeBtnColor:e})}})),React.createElement(r.PanelRow,null,React.createElement("label",null,(0,a.__)("Background","visitor-feedback")),React.createElement(g,{value:d,onChange:function(e){return o({closeBtnBG:e})}})))))}));function U(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=(0,c.compose)([(0,o.withSelect)((function(e){return{popup:(0,e("visitor-feedback").getPopup)()}})),(0,o.withDispatch)((function(e){return{setPopup:e("visitor-feedback").setPopup}}))])((function(e){var t=e.popup,n=e.setPopup,o=e.isLoading,c=void 0!==o&&o,u=t.heading,s=t.description,f=t.buttons;return React.createElement("div",{className:"tab_body d-flex justify-between"},React.createElement(l,{attributes:t,setAttributes:n}),c?React.createElement("h1",null,"Loading..."):React.createElement(React.Fragment,null,React.createElement("div",{className:"visible vstr-exit-intent-popup",id:"vstr_visitor_feedback"},React.createElement("div",{className:"popup"},React.createElement("div",{className:"close"},"×"),React.createElement(i.RichText,{tagName:"h3",className:"heading",value:u,onChange:function(e){return n({heading:e})}}),React.createElement(i.RichText,{tagName:"p",className:"text",value:s,onChange:function(e){return n({description:e})}}),React.createElement("div",{className:"form"},f.map((function(e,t){return React.createElement("div",{key:t,className:"vstr_button_item"},React.createElement(i.RichText,{value:e,className:"submit",tagName:"p",onChange:function(e){var r=U(f);r[t]=e,n({buttons:r})}}),React.createElement("span",{className:"close",onClick:function(){f.splice(t,1),n({buttons:f})}},"×"))})))),React.createElement("div",{className:"d-flex justify-center m-4"},React.createElement(r.Button,{variant:"primary",onClick:function(){return n({buttons:[].concat(U(f),["New Button"])})}},(0,a.__)("Add New Button","visitor-feedback")))),React.createElement(L,null)))}));function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=(0,c.compose)([(0,o.withSelect)((function(e){return{popup:(0,e("visitor-feedback").getPopup)()}})),(0,o.withDispatch)((function(e){return{setPopup:e("visitor-feedback").setPopup}}))])((function(e){var n=e.setPopup,r=C("vstr_popup_design",{type:"object"}),o=r.data,a=r.isLoading;return(0,t.useEffect)((function(){o&&n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o))}),[a]),(0,t.useEffect)((function(){localStorage.setItem("vstr_preview",!0)}),[]),React.createElement(React.Fragment,null,React.createElement(G,{isLoading:a}))}));function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=(0,o.createReduxStore)("visitor-feedback",{initialState:{popup:{background:"#5800FF",color:"#fff",buttonGap:"20px",heading:"Sorry to see you go. What made you decide not to try our product?",description:"Please let us know what we can do to get more people like you on our platform.",buttons:["I don't need it","I'm using a different tool","Too expensive","I don't see benefits"],CSS:"",uniqueId:"vstr_visitor_feedback",btnColor:"#fff",btnBG:"#3D00B2",headingFontsize:"20px",descFontSize:"16px",enabled:!1}},reducer:(0,o.combineReducers)({popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_POPUP"===t.type?K(K({},e),t.payload):"SET_ATTRIBUTES"===t.type?K(K({},e),{},{attributes:K(K({},e.attributes),t.payload)}):e}}),actions:{setPopup:function(e){return"object"!==H(e)?{}:{type:"SET_POPUP",payload:K({},e)}},setPopupData:function(e){return"object"!==H(e)?{}:{type:"SET_ATTRIBUTES",payload:K({},e)}},fetchPopupData:function(){return{type:"FET_POPUP_DATA"}}},selectors:{getPopup:function(e){return e.popup},getPopupData:function(e){return e.popup.data}}});(0,o.register)(V),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("vstr_settings_page");t&&(0,e.s)(t).render(React.createElement(J,null))}))}()}();
//# sourceMappingURL=settings.js.map